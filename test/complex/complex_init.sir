// EXPECT: PASS
// SOLVER_ARGS: --path ^entry

struct @Node {
    id: i32;
    weights: [2][2] i32;
}

struct @Graph {
    nodes: [2] @Node;
}

fun @main(): i32 {
    // Graph -> nodes[2] -> Node -> weights[2][2]
    let mut %g: @Graph = {
        {
            { 1, { {1, 2}, {3, 4} } }, // Node 0
            { 2, { {5, 6}, {7, 8} } }  // Node 1
        }
    };

^entry:
    require %g.nodes[0].id == 1, "n0 id";
    require %g.nodes[1].weights[0][0] == 5, "n1 w[0][0]";
    require %g.nodes[0].weights[1][1] == 4, "n0 w[1][1]";

    %g.nodes[1].weights[1][0] = 99;
    require %g.nodes[1].weights[1][0] == 99, "mod deep";

    ret 0;
}
