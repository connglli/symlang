// EXPECT: PASS
// SOLVER_ARGS: --main @main --path '^entry'
// INTERP_ARGS: --main @main --sym %?v=99
// COMPILER_ARGS: --main @main --sym %?v=99

struct @A { x: i32; }
struct @B { a: @A; y: i32; }
struct @C { b: @B; z: i32; }

fun @main() : i32 {
  sym %?v : value i32 in [0, 100];
  let mut %c: @C;

^init:
  %c.b.a.x = 1;
  %c.b.y = 2;
  %c.z = 3;
  br ^entry;

^entry:
  %c.b.a.x = %?v;

  require %c.b.y == 2, "unrelated field c.b.y must be preserved";
  require %c.z == 3, "unrelated field c.z must be preserved";
  require %c.b.a.x == 99, "nested field c.b.a.x must be updated to 99";

  ret 0;
}
