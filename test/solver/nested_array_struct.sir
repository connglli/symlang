// EXPECT: PASS
// SOLVER_ARGS: --main @main --path '^entry'
// INTERP_ARGS: --main @main --sym %?v=42
// COMPILER_ARGS: --main @main --sym %?v=42

struct @Inner { val: i32; }
struct @Outer { arr: [2] @Inner; }

fun @main() : i32 {
  sym %?v : value i32 in [0, 100];
  let mut %o: @Outer;

^init:
  %o.arr[0].val = 10;
  %o.arr[1].val = 20;
  br ^entry;

^entry:
  %o.arr[0].val = %?v;

  require %o.arr[1].val == 20, "unrelated array element o.arr[1].val must be preserved";
  require %o.arr[0].val == 42, "array element field o.arr[0].val must be updated to 42";

  ret 0;
}
